<!DOCTYPE html>
<html>
<body height="100%" width="100%">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
  <script src="https://unpkg.com/d3-dag@0.2.3"></script>
  <script src="https://visjs.github.io/vis-network/standalone/umd/vis-network.min.js"></script>
  <style type="text/css">
      html, body {
          height: 100%;
          margin: 0;
      }

  </style>
  <div id="mynetwork" style="min-height: 100%; min-width: 100%; height: 100%;"></div>

  <script>
    window.onload = () => {
      fetch("./numpy_deps.json").then(async (response) => {
        console.log(response);
        let contents = await response.json();
        var nodes = [];
        var edges = [];
        for (let pkg of contents.result.pkgs)
        {
          console.log(pkg.name)
          nodes.push({id: pkg.name, label: pkg.name});
          if (pkg.depends)
          {
            console.log(pkg.depends)
            for (let dep of pkg.depends)
            {
              edges.push({from: pkg.name, to: dep.split(" ")[0]})
            }
          }
        }
        
        var dataset = new vis.DataSet(nodes);
        var container = document.getElementById('mynetwork');

        var data = {
          nodes: nodes,
          edges: edges
        };
        var options = {autoResize: true};
        var network = new vis.Network(container, data, options);
      });
    }
  </script>
</body>
</html>
